#!/bin/bash -e
# Source: https://en.internetwache.org/scanning-alexas-top-1m-for-axfr-29-03-2015/

if [[ -z "$1" ]]; then
    echo "Please provide your domain TLD"
    exit 0
fi

DOMAIN="$1"
dig NS "$DOMAIN" +short |
    sed -e "s/\.$//g" |
    while read -r nameserver
    do
        echo "Testing $DOMAIN @ $nameserver"
        dig AXFR "$DOMAIN" "@$nameserver"
    done
